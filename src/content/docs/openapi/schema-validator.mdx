---
title: OpenAPI Spec Validator
description: A detailed reference guide on validating embedded OpenAPI contracts in your Starlight docs site with EinarCLI.
---

EinarCLI allows you to validate embedded OpenAPI contracts. It provides the flexibility to create the contract within your project and immediately validate it against the OpenAPI specification. This ensures that your API definitions are always up to standard, making it easier to maintain consistency and reliability throughout the development lifecycle.

## üõ†Ô∏è Generate a New Embedded Spec

Inside your project directory, run the following command to create a new Embedded Spec:

```sh
einar generate openapi create-customer-spec
```

The create-customer-spec will be created in the following directory structure:

```sh
/app
  /shared
    /openapi
      - create_customer_spec_test.go
      - create_customer_spec.go
      - create_customer_spec.yaml
```

## üë®‚Äçüíª Example - HTTP Server POST Request
Here‚Äôs an example of how you can use the generated spec within an HTTP server POST request:
```go
func init() {
	ioc.Registry(
		postCustomer,
		serverwrapper.NewEchoWrapper,
		openapi.NewCreateCustomerSpec)
}
func postCustomer(e serverwrapper.EchoWrapper, spec openapi.CreateCustomerSpec) {
	e.POST("/insert-your-custom-pattern-here", func(c echo.Context) error {
		bodyBytes, err := io.ReadAll(c.Request().Body)
		defer c.Request().Body.Close()
		if err != nil {
			return c.JSON(http.StatusBadRequest, map[string]string{
				"error": "Failed to read request body",
			})
		}
		if err := spec.ValidateBodyBytes(bodyBytes); err != nil {
			return c.JSON(http.StatusBadRequest, map[string]string{
				"error": err.Error(),
			})
		}
		return c.JSON(http.StatusOK, map[string]string{
			"message": "Unimplemented",
		})
	})
}
```
This example demonstrates how you can validate the incoming request body against the generated OpenAPI spec. The request body is read, validated, and a response is returned based on the validation outcome.
