---
title: Slog - Datadog Trace Correlation
description: This site explains how to integrate the Slog logger into your EinarCLI application.
---

EinarCLI allows you to integrate https://pkg.go.dev/log/slog with a logger function that accepts a span from the trace as a parameter, enabling the generation of injectable dependencies for both logging and trace operations to work together.

## üõ†Ô∏è `Slog` and `Tracer` installation
1.- Inside your project directory, run the following command to include the `Slog With Span` dependency in your project:

```sh
einar install slog-with-dd-span
```
2.- Inside your project directory, run the following command to include the `Tracer` from the `TraceProvider` dependency in your project:
```sh
einar install grpc-trace-provider
```

These commands will generate the following files and directories within your project, setting up the necessary infrastructure for slog and tracing correlation:

```sh 
/app
  /adapter
    /out
      /slogging
        - span_logger.go  
```

```sh
/app
  /shared
    /infrastructure
        /observability
            - trace_provider.go
```

## üë®‚Äçüíª Tutorial: Traces and Logs Correlation
In this tutorial, we will generate a new onload job, inject the logger and tracer, create a new span, and correlate traces with logs.

1.- Inside your project directory, run the following command to create a new custom onload job:
```sh 
einar generate onload-job my-job-name
```
Here‚Äôs an example of how the generated code will look:
```go
func init() {
  ioc.Registry(myJobName)
}
func myJobName() {
  //execute your onload job here
}
```
2.- Inject the tracer and logger into your onload job, and perform a correlated trace-logging operation.

```go
package onload

import (
	"context"
	"example-project/app/adapter/out/slogging"
	"example-project/app/shared/infrastructure/observability"
	"fmt"

	ioc "github.com/Ignaciojeria/einar-ioc/v2"
	"go.opentelemetry.io/otel/trace"
)

func init() {
	ioc.Registry(
		myJobName,
		observability.NewTraceProvider,
		slogging.NewSpanLogger)
}

func myJobName(
	tracer trace.Tracer,
	logger slogging.SpanLogger) {
	spanCtx, span := tracer.Start(context.Background(), "my-onload-job-parent-trace")
	defer span.End()
	fmt.Println("PARENT OUTPUT :")
	logger.
		SpanLogger(span).
		Info("Hello from log + trace structured logs :D",
			"customKey", "customValue")

	fmt.Println("CORRELATED CHILDREN OUTPUT :")
	executeCorrelatedLogOperation(spanCtx, logger, tracer)
}

func executeCorrelatedLogOperation(
    ctx context.Context, 
    logger slogging.SpanLogger, 
    tracer trace.Tracer) {
	_, span := tracer.Start(ctx, "my-onload-job-child-trace")
	defer span.End()

	logger.
		SpanLogger(span).
		Info("Hello from log + trace correlated structured logs :D",
			"correlatedCustomKey1", "correlatedCustomValue2")
}
```

When executed, the log will appear in the console output as follows:

```sh
PARENT OUTPUT : {
    "time": "2024-09-13T13:02:09.3517257-03:00",
    "level": "INFO",
    "msg": "Hello from log + trace structured logs :D",
    "trace_id": "41646157aa203974fda54f91d1843b7a",
    "span_id": "12a1af7ec93b35e3",
    "dd.trace_id": "18277102150456982394",
    "dd.span_id": "1342547123009959395",
    "dd.service": "example-project",
    "dd.env": "local",
    "dd.version": "1.0.0",
    "customKey": "customValue"
}
CORRELATED CHILDREN OUTPUT : {
    "time": "2024-09-13T13:02:09.3523189-03:00",
    "level": "INFO",
    "msg": "Hello from log + trace correlated structured logs :D",
    "trace_id": "41646157aa203974fda54f91d1843b7a",
    "span_id": "dfb7bbdfee8ff240",
    "dd.trace_id": "18277102150456982394",
    "dd.span_id": "16120559961650491968",
    "dd.service": "example-project",
    "dd.env": "local",
    "dd.version": "1.0.0",
    "correlatedCustomKey1": "correlatedCustomValue2"
}
```